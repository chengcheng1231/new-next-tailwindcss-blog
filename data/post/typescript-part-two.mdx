---
title: '[å‰ç«¯ç­†è¨˜] TypeScript ç°¡ä»‹ï¼ˆä¸‹ï¼‰ğŸ’«'
date: 2022-6-23
draft: false
category: 'coding'
author: Chengcheng
imgSrc: '/static/images/typescript-part-one/typescript.png'
tags: ['TypeScript']
description: æ¥çºŒä¸Šä¸€ç¯‡ã€å‰ç«¯ç­†è¨˜ã€‘ TypeScript ç°¡ä»‹ï¼ˆä¸Šï¼‰ğŸ’« ï¼Œæˆ‘å€‘å†ä¾†äº†è§£å…¶ä»–å¸¸è¦‹çš„ TS å¯«æ³•...
---

<PostImage
  source="/static/images/typescript-part-one/typescript.png"
  description=""
/>

æ¥çºŒä¸Šä¸€ç¯‡ã€å‰ç«¯ç­†è¨˜ã€‘ [TypeScript ç°¡ä»‹ï¼ˆä¸Šï¼‰ğŸ’«](https://chengcheng.tw/blog/coding/typescript-part-one) ï¼Œæˆ‘å€‘å†ä¾†äº†è§£å…¶ä»–å¸¸è¦‹çš„ TS å¯«æ³•ã€‚

ç›®éŒ„ï¼š

<TOCInline toc={props.toc} exclude="Overview" toHeading={2} />

## ä»€éº¼æ˜¯å¯é¸å±¬æ€§ï¼ˆOptional Propertiesï¼‰ã€ä»»æ„å±¬æ€§ï¼ˆIndexable Typesï¼‰ã€å”¯è®€å±¬æ€§ï¼ˆReadonly propertiesï¼‰
### ğŸš€ å¯é¸å±¬æ€§ï¼ˆOptional Propertiesï¼‰

ç•¶æˆ‘å€‘è¨»è¨˜è®Šæ•¸çš„å‹åˆ¥å¾Œï¼Œåœ¨æŸäº›ç‹€æ³ä¸‹æˆ‘å€‘ä¸¦ä¸éœ€è¦æŸå€‹å±¬æ€§æ™‚å°±å¯ä»¥åˆ©ç”¨ `ï¼Ÿ` ä¾†è¡¨ç¤ºï¼Œä¾‹å¦‚ä»¥ä¸‹ä¾‹å­ï¼Œæˆ‘å€‘ç”¨å‹åˆ¥åˆ¥å `type` ä¾†å®£å‘Šå‹åˆ¥ä¸¦å®£å‘Šè®Šæ•¸ï¼Œå¯ä»¥çœ‹åˆ° `TStudent2` çš„ `age` å¤šäº†ä¸€å€‹ `ï¼Ÿ` ï¼Œå› æ­¤ `obj2` æ²’æœ‰ `age` ä¹Ÿä¸æœƒåƒ `obj` å‡ºéŒ¯

```typescript
type TStudent = {
    name: string
    age: number
}

const obj: TStudent = {
    name: 'Josh',
}
// Property 'age' is missing in type '{ name: string; }' but required in type 'TStudent'.

type TStudent2 = {
    name: string
    age?: number
}

const obj2: TStudent2 = {
    name: 'Amber',
}
```

### ğŸš€ ä»»æ„å±¬æ€§ï¼ˆIndexable Typesï¼‰

æˆ‘å€‘åªçŸ¥é“æŸäº›å±¬æ€§çš„å‹åˆ¥ï¼Œä¸æ›‰å¾—å…¶ä»–å±¬æ€§çš„å‹åˆ¥æ™‚ç”¨ `[x: type]: type` å¯ç¢ºä¿å‹åˆ¥çš„å½ˆæ€§

```typescript
type TStudent = {
    name: string
    age: number
    [x: string]: any
}

const obj: TStudent = {
    name: 'Josh',
    age: 30,
    address: 'hihiroad',
}
```

âš  ä½¿ç”¨ä»»æ„å±¬æ€§éœ€æ³¨æ„çš„äº‹æƒ…

> å€˜è‹¥ä»»æ„å±¬æ€§ç‚ºã€Œç‰¹å®šã€å‹åˆ¥ (é any æˆ– unknown)ï¼Œè¦æ³¨æ„çš„æ˜¯æ‰€æœ‰å®£å‘Šçš„å±¬æ€§(åŒ…æ‹¬ç¢ºå®šå’Œå¯é¸å±¬æ€§)éƒ½å¿…é ˆæ˜¯ã€Œç‰¹å®šã€å‹åˆ¥çš„å­å±¬æ€§

å¦‚ä»¥ä¸Šä¾‹å­ï¼Œè‹¥ä½ çš„ä»»æ„å±¬æ€§ç‚º`any`ï¼Œé‚£ä¸¦ä¸æœƒå½±éŸ¿å…¶ä»–å±¬æ€§ï¼Œä½†è‹¥ä½ å°‡å…¶æ”¹æˆç‰¹å®šå‹åˆ¥ï¼Œå¦‚ `string`ï¼Œå‰‡ `age`å±¬æ€§æœƒæœ‰éŒ¯ï¼Œå› ç‚º`age`çš„å‹åˆ¥ç‚º `number`ï¼Œä¸æ˜¯ `string`çš„å­å±¬æ€§

```typescript
type TStudent = {
    name: string
    age?: number
    [x: string]: string
}
// Property 'age' of type 'number' is not assignable to 'string' index type 'string'.

const obj: TStudent = {
    name: 'Josh',
    age: 30,
    address: 'hihiroad',
}
// Type '{ name: string; number: number; address: string; }' is not assignable to type 'TStudent'.
// Property 'age' is incompatible with index signature.
// Type 'number' is not assignable to type 'string'.
```

å¯ä»¥åŠ ä¸Š `number | undefined` ä¾†è™•ç†æ­¤éŒ¯èª¤

```typescript
type TStudent = {
    name: string
    age?: number
    [x: string]: string | number | undefined
}

const obj: TStudent = {
    name: 'Josh',
    age: 30,
    address: 'hihiroad',
}
```

### ğŸš€ å”¯è®€å±¬æ€§ï¼ˆReadonly propertiesï¼‰

åˆ©ç”¨æ­¤å±¬æ€§ä»£è¡¨ä½ åœ¨è³¦å€¼å¾Œï¼Œå°±å†ä¹Ÿä¸èƒ½æ”¹è®Šå…¶å€¼äº†ï¼Œç”¨æ³•æ˜¯åœ¨å±¬æ€§å‰é¢åŠ ä¸Š `readonly`

```typescript
type TStudent = {
    readonly name: string
    age?: number
}

const obj: TStudent = {
    name: 'Josh',
    age: 30,
}

obj.name = 'Joseph' // Cannot assign to 'name' because it is a read-only property.
obj.age = 28
```

## ä»€éº¼æ˜¯å‹åˆ¥æ¨è«–ï¼ˆType Inferenceï¼‰èˆ‡å‹åˆ¥è¨»è¨˜ï¼ˆType Annotationï¼‰
### ğŸš€ å‹åˆ¥æ¨è«–ï¼ˆType Inferenceï¼‰

æ˜¯ TS è‡ªä½ é–‹å§‹é–‹ç™¼çš„æ™‚å€™ï¼Œæœƒå¹«ä½ åˆ¤åˆ¥è®Šæ•¸å‹åˆ¥ï¼Œå¦‚ä»¥ä¸‹ï¼Œè‹¥ä½ æ²’å®£å‘Š `student` å‹åˆ¥ï¼ŒTS æœƒè‡ªå‹•å¹«ä½ åˆ¤åˆ¥

<PostImage
  source="/static/images/typescript-part-two/inference.png"
  description=''
/>

### ğŸš€ å‹åˆ¥è¨»è¨˜ï¼ˆType Annotationï¼‰

ç‚ºé–‹ç™¼è€…æ‰‹å‹•å®£å‘Šçµ¦ TS çœ‹çš„è¨»è¨˜ï¼Œå°±æ˜¯ä¸€èˆ¬çš„å¯«æ³•

<PostImage
  source="/static/images/typescript-part-two/annotation.png"
  description=''
/>

ä¹‹æ‰€ä»¥ä½ éœ€è¦å®£å‘Šå‹åˆ¥ï¼Œå…¶å¥½è™•åœ¨æ–¼åœ¨è®“é–‹ç™¼è€…/å”ä½œè€…å¯ä»¥æ˜ç¢ºçŸ¥é“è®Šæ•¸æ˜¯å“ªå€‹å‹åˆ¥ï¼Œæ‰ä¸æœƒè®“ TS æˆ–é–‹ç™¼æ™‚å»çŒœé‚£å€‹å±¬æ€§æ˜¯ä»€éº¼å‹åˆ¥è€Œé€ æˆç¨‹å¼ç¢¼çš„æ··äº‚

<PostImage
  source="/static/images/typescript-part-two/annotation2.png"
  description=''
/>

### ğŸš€ å‹åˆ¥æ–·è¨€ ï¼ˆType Assertionsï¼‰

ä¸»è¦ç”¨æ–¼ TS å¹«ä½ åšå‹åˆ¥æ¨è«–å¾Œï¼Œä½ ä¸æ»¿è¶³å…¶ TS å°æ–¼æ­¤å‹åˆ¥çš„é™åˆ¶ï¼Œå› æ­¤æ‰‹å‹•å»å®£å‘Šè¦†è“‹å®ƒçš„æ¨æ–·ã€‚ä½¿ç”¨æ™‚æ©Ÿåƒæ˜¯ä½ ä¸ç¢ºå®šè³‡æ–™æœƒæ˜¯å“ªç¨®å‹åˆ¥æ™‚ï¼Œå¦‚åœ¨ä¸²æ¥ api ã€ä¸²æ¥ç¬¬ä¸‰æ–¹å‡½å¼ç­‰ç­‰çš„ï¼Œæœ‰å…©ç¨®å¯«æ³•ï¼š

å€¼ as å‹åˆ¥ ï¼ˆReact å°ˆæ¡ˆä½¿ç”¨ JSX èªæ³•ï¼Œåªèƒ½ç”¨æ­¤å¯«æ³•ï¼‰
`<å‹åˆ¥>`å€¼
ä¾‹å¦‚ä»¥ä¸‹çš„ä¾‹å­ï¼Œ`typeof animal.swim` æ˜¯æœƒå ±éŒ¯çš„ï¼Œå› ç‚ºè‹¥æ˜¯ `Cat`å‹åˆ¥ï¼Œæ˜¯æ²’æœ‰ `swim` é€™å€‹å±¬æ€§


```typescript
interface Cat {
    name: string;
    run(): void;
}

interface Fish {
    name: string;
    swim(): void;
}

function isFish(animal: Cat | Fish) {
    if (typeof animal.swim === 'function') { 
        return true;
    }
    return false;
}
// Property 'swim' does not exist on type 'Cat | Fish'.
// Property 'swim' does not exist on type 'Cat'.
```

å› æ­¤æœƒéœ€è¦åŠ ä¸Šæ–·è¨€å°±ä¸æœƒå ±éŒ¯ï¼Œç›´æ¥å‘Šè¨´ TS `animal` åœ¨é‚£é‚Šçš„å‹åˆ¥

```typescript
function isFish(animal: Cat | Fish) {
    if (typeof (<Fish>animal).swim === 'function') { 
        return true;
    }
    return false;
}
```

å¦ä¸€å€‹ä¾‹å­æ˜¯æ¥ api å¾Œçš„æ–·è¨€ ï¼ˆè¦å…ˆè£ axiosï¼Œ`npm i axios`ï¼‰ï¼Œ`data1`å°±èƒ½è¢«æ–·è¨€æˆ `Data`çš„å‹åˆ¥

```typescript
import axios from 'axios';

type Data = {
    userId: number
    id: number
    title: string
    completed: boolean
}

async function getData() {
    const res = await axios.get('https://jsonplaceholder.typicode.com/todos/1')
    const data1 = await res.data as Data  // æ–·è¨€å…¶ç‚º Data type
    console.log(data1) // { userId: 1, id: 1, title: 'delectus aut autem', completed: false }
}

getData()
```

## æ€éº¼å¯«é¡åˆ¥ ï¼ˆClassï¼‰ã€æ³›å‹ï¼ˆGenericï¼‰
### ğŸš€é¡åˆ¥ ï¼ˆClassï¼‰

æˆ‘å€‘å¯ä»¥å°æ–¼å±¬æ€§ã€constructorã€æ–¹æ³•åŠ ä¸Šå‹åˆ¥

```typescript
class User {
    name: string
    private age: number
    protected adress: string

    constructor(name: string, age: number, adress: string) {
        this.name = name;
        this.age = age;
        this.adress = adress;
    }

    sayHi(): string {
        return `Hi, ${this.name}, your age is ${this.age}`;
    }
}

const user1 = new User('david', 20, 'david road')
console.log(user1) // User { name: 'david', age: 20, adress: 'david road' }
console.log(user1.sayHi()) // Hi, david, your age is 20
```

å¯ä»¥æ³¨æ„åˆ°æˆ‘å€‘é€é private/ protected ä¾†åŠ è¨»åœ¨å±¬æ€§ä¸Šï¼Œä»–å€‘çš†æœ‰ä¸€å€‹ç‰¹æ€§æ˜¯**ä½ ä¸èƒ½å¾å¤–éƒ¨ç›´æ¥è¨ªå• ( å¦‚ä»¥ä¸‹éŒ¯èª¤)**ï¼Œä½†å·®åˆ¥æ˜¯ `private` æ˜¯åªå¯ä»¥åœ¨è©² Class ä¾†è®€å–ï¼Œä½ ç„¡æ³•ç¹¼æ‰¿ä¾†ä½¿ç”¨ï¼Œ `protected` å¯ä»¥åœ¨è©² Class ä¾†è®€å–ï¼Œä¹Ÿå¯ä»¥é€éç¹¼æ‰¿ä¾†ä½¿ç”¨

```typescript
console.log(user1.age)
// Property 'age' is private and only accessible within class 'User'.

console.log(user1.adress)
// Property 'adress' is protected and only accessible within class 'User' and its subclasses.
```

åˆ©ç”¨ extends ä¾†æ“´å±•/ç¹¼æ‰¿

```typescript
class Student extends User {
    grade: number
    
    constructor(name: string, age: number, adress: string, grade: number) {
       super(name, age, adress)  // åœ¨é€™è£¡åŸ·è¡Œçš„ super ç­‰åŒæ–¼çˆ¶é¡åˆ¥çš„ constructor
        this.grade = grade;
    }
 
    sayGrade(): string {
        return `Hi, ${this.name}, your grade is ${this.grade}`;
    }
}

const student1 = new Student('JoJo', 21, 'JoJo road', 2)
console.log(student1) // Student { name: 'JoJo', age: 21, adress: 'JoJo road', grade: 2 }
console.log(student1.sayGrade()) // Hi, JoJo, your grade is 2
```

### ğŸš€æ³›å‹ï¼ˆGenericï¼‰

ä¸»è¦æ˜¯æŒ‡åœ¨å®šç¾©å‡½å¼ã€ä»‹é¢æˆ–é¡åˆ¥çš„æ™‚å€™ï¼Œä¸å…ˆå®£å‘Šå‹åˆ¥ï¼Œè€Œåœ¨ä½¿ç”¨çš„æ™‚å€™å†å®£å‘Šï¼Œå¦‚ä»¥ä¸‹åˆ©ç”¨ `<T>` ä¾†å®£å‘Šç‚ºä½¿ç”¨æ™‚æ‰æœƒå‚³å…¥çš„å‹åˆ¥

```typescript
function printName<T> (name: T) {
    return `Your name is ${name}`
}

console.log(printName<string>('Josh'))
// Your name is Josh
```

è‹¥éœ€è¦å¤šå€‹å‹åˆ¥å¼•æ•¸ï¼Œå¯åˆ©ç”¨ä¸åŒçš„æ–‡å­—åšå®£å‘Š

```typescript
function printNameAge<T, U> (name: T, age: U) {
    return `Your name is ${name} and age is ${age}`
}

console.log(printNameAge<string, number>('Josh', 30))
// Your name is Josh and age is 30
```

## ç¸½çµ

é›–ç„¶åˆ†ç‚ºä¸Šä¸‹å…©ç¯‡ä¾†ä»‹ç´¹ TSï¼Œä½†é‚„æ˜¯æœ‰å¾ˆå¤šæ²’ä»‹ç´¹åˆ°ï¼Œä¸éé€™äº›å¯«æ³•éƒ½æ˜¯å·¥ä½œä¸Šå¸¸è¦‹çš„ï¼Œå…¶ä»–å¤§æ¦‚éƒ½æ˜¯ç”±é€™äº›æ±è¥¿åŠ ä»¥å»¶ä¼¸ï¼ŒTS æœ€ä¸»è¦çš„å·¥ä½œè®“æˆ‘å€‘åœ¨é–‹ç™¼ JS çš„æ™‚å€™å°±çŸ¥é“å“ªäº›æ˜¯ä¸åˆç†çš„å‹åˆ¥ï¼Œå› æ­¤å¤§å¤§æ¸›å°‘é‹è¡Œæ™‚ç™¼ç”ŸéŒ¯èª¤çš„æ©Ÿç‡ï¼Œä¸éæœ‰ä¸€å¥½æ²’å…©å¥½ï¼Œåœ¨é–‹ç™¼ä¸Šä½ ç¸½é‚„æ˜¯è¦èŠ±é¡å¤–çš„æ™‚é–“ä¾†å®šç¾©å„ç¨®å‹åˆ¥ï¼Œç¸½ä¹‹ï¼Œè‹¥æƒ³ç¹¼çºŒå¾€ä¸‹æ¢ç©¶ TS çš„æœ‹å‹å¯åƒè€ƒä»¥ä¸‹æ–‡ç« ï¼Œæˆ–è€…å¯ä»¥ç›´æ¥çœ‹å®˜æ–¹æ–‡ä»¶ï¼š[Generics](https://www.typescriptlang.org/docs/handbook/2/generics.html)

### åƒè€ƒè³‡æ–™ï¼š

[Day05:ã€TypeScript å­¸èµ·ä¾†ã€‘TS æŒ‡å®šå‹åˆ¥çš„ä¸‰ç¨®æ–¹æ³•](https://ithelp.ithome.com.tw/articles/10263795)

[TypeScript å…¥é—¨è‡ªå­¦ç¬”è®° â€” ç±»å‹æ–­è¨€ï¼ˆäºŒï¼‰](https://www.cnblogs.com/echoyya/p/14558034.html#%E7%B1%BB%E5%9E%8B%E6%96%AD%E8%A8%80)

[TypeScript ç­†è¨˜ï¼šæ¨æ–·ã€è¨»è¨˜èˆ‡æ–·è¨€](https://simonallen.coderbridge.io/2021/08/06/ts-inference-annotations-assertiong/)

[TypeScript æ–°æ‰‹æŒ‡å—(æ³›å‹)](https://willh.gitbook.io/typescript-tutorial/advanced/generics)